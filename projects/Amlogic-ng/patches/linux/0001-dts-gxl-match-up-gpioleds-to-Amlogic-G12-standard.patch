From a9596c0893242d4607eb8e4d98a52fcbbc4e730d Mon Sep 17 00:00:00 2001
From: Portisch <hugo.portisch@yahoo.de>
Date: Thu, 23 Jul 2020 09:24:24 +0200
Subject: [PATCH 1/6] dts: gxl: match up 'gpioleds' to Amlogic G12* standard

---
 .../dts/amlogic/coreelec-gxl/coreelec_gxl.dtsi    | 12 ++++++++++++
 .../boot/dts/amlogic/coreelec-gxl/lepotato.dtsi   | 15 +++++----------
 2 files changed, 17 insertions(+), 10 deletions(-)

diff --git a/arch/arm64/boot/dts/amlogic/coreelec-gxl/coreelec_gxl.dtsi b/arch/arm64/boot/dts/amlogic/coreelec-gxl/coreelec_gxl.dtsi
index a8f3454b6084..8c5e03032935 100644
--- a/arch/arm64/boot/dts/amlogic/coreelec-gxl/coreelec_gxl.dtsi
+++ b/arch/arm64/boot/dts/amlogic/coreelec-gxl/coreelec_gxl.dtsi
@@ -5,6 +5,18 @@
 
 	chosen { };
 
+	/delete-node/ sysled;
+
+	gpioleds {
+		compatible = "gpio-leds";
+		status = "okay";
+
+		sys_led {
+			gpios = <&gpio GPIODV_24 GPIO_ACTIVE_HIGH>;
+			linux,default-trigger = "none";
+		};
+	};
+
 	reserved-memory {
 		ramoops@0x07400000 {
 			compatible = "ramoops";
diff --git a/arch/arm64/boot/dts/amlogic/coreelec-gxl/lepotato.dtsi b/arch/arm64/boot/dts/amlogic/coreelec-gxl/lepotato.dtsi
index 30bc3cdb2811..7dd4f8b1467d 100644
--- a/arch/arm64/boot/dts/amlogic/coreelec-gxl/lepotato.dtsi
+++ b/arch/arm64/boot/dts/amlogic/coreelec-gxl/lepotato.dtsi
@@ -1,22 +1,17 @@
 /* Stuff common to le potato */
 
 / {
-	/delete-node/ sysled;
-	leds: gpio_leds {
-		compatible = "gpio-leds";
-		status = "okay";
-
-		system {
+	gpioleds {
+		sys_led {
 			label = "librecomputer:system-status";
-			gpios = <&gpio GPIODV_24 GPIO_ACTIVE_HIGH>;
-			default-state = "on";
 			panic-indicator;
+			linux,default-trigger = "default-on";
 		};
 
-		blue {
+		blue_led {
 			label = "librecomputer:blue";
 			gpios = <&gpio_ao GPIOAO_2 GPIO_ACTIVE_HIGH>;
-			default-state = "off";
+			linux,default-trigger = "none";
 		};
 	};
 
-- 
2.17.1

